function viewState() {
    return getViewState.name()
}
$(document).ready(function() {
    function isMobile() {
        var deviceWidth = $(window).width();
        if (deviceWidth < 600) {
            return true
        } else {
            return false
        }
    }
    var displayVideoPlayer = $(".video-content-list .video-list-item");
    var hideVideoPlayer = $(".video-player .view-btn-close");
    displayVideoPlayer.on("click", function() {
        var currentVideo = $(this).attr("data-video");
        $("section.video-player video.player").attr("src", currentVideo);
        $("section.video-player").fadeIn(200);
        $("section.page.video").css("z-index", "110");
        $("video.player").each(function() {
            this.play()
        });
        $(hideVideoPlayer).on("click", function() {
            $("section.video-player").fadeOut(200);
            $("section.page.video").css("z-index", "auto");
            $("video.player").each(function() {
                this.load()
            })
        })
    });
    var wrap = ".content .video-content";
    var content = ".video-content-wrap";
    var videoPagePercentage = 0;
    var videoScrollInterval = new Object;

    function videoScrollCalculate() {
        if (getViewState.name() != "video") {
            clearInterval(videoScrollInterval)
        } else {
            videoScrollInterval = setInterval(function() {
                var wintop = $(wrap).scrollTop(),
                    docheight = $(content).height(),
                    winheight = $(window).height();
                var totalScroll = wintop / (docheight - winheight) * 100;
                videoPagePercentage = totalScroll;
                if (videoPagePercentage <= 5) {
                    setPageState("start")
                } else {
                    setPageState("any")
                }
                if (videoPagePercentage >= 95) {
                    setPageState("end")
                } else {
                    setPageState("any")
                }
            }, 100)
        }
    }
    $(window).on("hashchange", function() {
        videoScrollCalculate()
    });
    var thumb = $(".item-wrap");
    var videoInit = $(".video-thumb");
    var image = ".video-item-image .image";
    videoInit.each(function() {
        this.currentTime = 10
    });
    thumb.on("mouseenter", function() {
        $(this).find(image).fadeOut("200");
        var video = $(this).find(".video-thumb").get(0);
        video.currentTime = 10;
        video.play()
    });
    thumb.on("mouseleave", function() {
        $(this).find(image).fadeIn("200");
        var video = $(this).find(".video-thumb").get(0);
        video.pause()
    })
});
